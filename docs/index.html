<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Instrument Cluster: Project Architecture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxyfile.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Instrument Cluster
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Project Architecture </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doxyfile_readme"></a> We implemented <b>Tensor Regulators</b> so that the servo motors of our <b>JetRacer</b> and our <b>Raspberry Pi</b> have the neccesary Voltage to function properly.</p>
<div class="image">
<img src="structure.png" alt="" width="50%"/>
<div class="caption">
Project Structure</div></div>
<h1><a class="anchor" id="autotoc_md4"></a>
Communication Structure</h1>
<p>The Jetson communicates with the Raspberry via <b>mqtt</b>, with a <b>Cloud Broker</b> (HiveMQ) and a local Broker. We chose mqtt since its latency is pretty small, and it seems to get the job done well. The Raspberry is the one to display the information in the <b>LCD</b>, with informations of Jetson's temperature and battery, and also information of the speed directly from the speed sensor, with arduino via CAN.</p>
<div class="image">
<img src="mqtt.png" alt="" width="50%"/>
<div class="caption">
Communication Structure</div></div>
<h1><a class="anchor" id="autotoc_md5"></a>
CAN Communication: Raspberry Pi and Arduino</h1>
<p>This project demonstrates how to establish a <b>CAN (Controller Area Network)</b> communication between an <b>Arduino</b> and a <b>Raspberry Pi</b>. The Arduino reads speed data from a sensor, calculates the speed, and sends it to the Raspberry Pi over a CAN bus using an <b>MCP2515 CAN module</b>. The Raspberry Pi processes and displays the received data using Python.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Overview</h1>
<p>Controller Area Network (CAN) is a robust communication protocol commonly used in automotive and industrial applications. This project involves: Using an Arduino to send speed data via a CAN bus. Configuring a Raspberry Pi to receive and process the data using Python.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Hardware Requirements</h1>
<ul>
<li><b>Arduino Uno/Nano/Mega</b> or similar.</li>
<li><b>Raspberry Pi</b> (any version with SPI support, e.g., Raspberry Pi 4).</li>
<li><b>MCP2515 CAN Module</b> (two units: one for the Arduino and one for the Raspberry Pi). </li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
- Speed sensor (connected to Arduino).</h1>
<h2><a class="anchor" id="autotoc_md9"></a>
Raspberry Pi to MCP2515 CAN Module Connection</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MCP2515 Pin   </th><th class="markdownTableHeadNone">Raspberry Pi GPIO Pin    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>VCC</b>   </td><td class="markdownTableBodyNone">3.3V or 5V    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>GND</b>   </td><td class="markdownTableBodyNone">GND    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>CS</b>   </td><td class="markdownTableBodyNone">GPIO 8 (SPI0_CS0)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>SCK</b>   </td><td class="markdownTableBodyNone">GPIO 11 (SPI0_SCLK)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>MOSI</b>   </td><td class="markdownTableBodyNone">GPIO 10 (SPI0_MOSI)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>MISO</b>   </td><td class="markdownTableBodyNone">GPIO 9 (SPI0_MISO)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>INT</b>   </td><td class="markdownTableBodyNone">GPIO 25 (optional)   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md11"></a>
Arduino Setup</h2>
<ol type="1">
<li>Install the <b>MCP_CAN</b> library in the Arduino IDE:<ul>
<li>Go to <b>Sketch &gt; Include Library &gt; Manage Libraries</b>.</li>
<li>Search for <code>MCP_CAN</code>, CAN-BUS Shield and install it.</li>
</ul>
</li>
<li>Upload the Arduino code (provided in our arduino directory).</li>
<li>Connect the speed sensor to the Arduino and verify it calculates speed correctly.</li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md13"></a>
Raspberry Pi Setup</h2>
<p>(<a href="https://forums.raspberrypi.com/viewtopic.php?t=353451">https://forums.raspberrypi.com/viewtopic.php?t=353451</a>) </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
